---
title: 小程序动画效果使用 
date: 2017-12-28 20:16:40
tags: 小程序
categories:
---

这个动画能实现基本功能.不过还是挺费劲的.
但现在还有个问题没有解决.
就是循环的时候 每个items加上动画 如何让他单个执行 这个还没想好


**js**
```
Page({
  data: {
    markers: [{
      id: 0,
      latitude: 28.0369400000,
      longitude: 120.6492300000,
      width: 20,
      height: 20,
      title: "欧美佳化妆美甲祛斑纹绣店"
    }],
    animationData: {}
  },
  onLoad: function () {
    // 页面渲染完成
    //实例化一个动画
    this.animation = wx.createAnimation({
      // 动画持续时间，单位ms，默认值 400
      duration: 1000,
      /**
       * http://cubic-bezier.com/#0,0,.58,1  
       *  linear  动画一直较为均匀
       *  ease    从匀速到加速在到匀速
       *  ease-in 缓慢到匀速
       *  ease-in-out 从缓慢到匀速再到缓慢
       * 
       *  http://www.tuicool.com/articles/neqMVr
       *  step-start 动画一开始就跳到 100% 直到动画持续时间结束 一闪而过
       *  step-end   保持 0% 的样式直到动画持续时间结束        一闪而过
       */
      timingFunction: 'ease',
      // 延迟多长时间开始
      delay: 100,
      /**
       * 以什么为基点做动画  效果自己演示
       * left,center right是水平方向取值，对应的百分值为left=0%;center=50%;right=100%
       * top center bottom是垂直方向的取值，其中top=0%;center=50%;bottom=100%
       */
      transformOrigin: 'center top 0',
      success: function (res) {
        console.log(res)
      }
    });

    setTimeout(function () {
      this.rotate();
    }.bind(this), 200)
  },

  /**
 * 放大显示
 */
  rotate: function () {
    //放大显示后并恢复
    //  //现在唯一的问题是 如果在循环里绑定相同的动画 却是单一执行呢 唉....
    // this.animation.rotate(150).step()
    this.animation.opacity(1).scale(1.5, 1.5).step().scale(1, 1).step();
    this.setData({
      //输出动画
      animation: this.animation.export()
    })
  }
})
```
<!--more-->

**wxml**
```
<view class="container">
  <view animation="{{animation}}" style='opacity:0' class="view">我在做动画</view>
</view>
<button type="primary" bindtap="rotate">旋转</button>
```


## 参考文档
[微信小程序把玩（四十）animation API](http://blog.csdn.net/u014360817/article/details/52712205)
[微信小程序的动画效果](https://www.cnblogs.com/JinJi-Jary/archive/2017/01/12/6278301.html)
[官方文档](https://mp.weixin.qq.com/debug/wxadoc/dev/api/api-animation.html#wxcreateanimationobject)